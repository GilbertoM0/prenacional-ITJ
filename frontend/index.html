<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRENACIONAL</title>
    <link rel="icon" href="./assets/images/LogoPre.ico">
    <!-- ====== CSS Files ====== -->
    <link rel="stylesheet" href="./assets/css/home.css">
</head>

<body>
    <header>
        <ul class="navigation">
            <li><a href="index.html"><ion-icon name="home-sharp"></ion-icon>INICIO</a></li>
            
            <li>
                <a href="#">DISCIPLINAS<ion-icon name="caret-down"></ion-icon></a>
                <ul class="subdiscipline"></ul>
            </li>

            <li><img src="./assets/images/Logo Prenacional.webp" alt="logo" class="preLogo"></li>

            <li class="login"><a href="./login.html">LOGIN<ion-icon name="person-circle-sharp"></ion-icon></a></li>
        </ul>

        <div class="content">
            <img src="./assets/images/Logo Prenacional.webp" alt="logo">
        </div>
        <!-- =================================================== -->
        <!-- ================= Redes sociales ============== -->
        <!-- =================================================== -->
         
<div class="card">
  <div class="background">
  </div>
  <div class="logo">
   Redes sociales ITJ
  </div>

  <a href="https://www.facebook.com/ITJiquilpanMich"><div class="box box1"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg">
  <path d="M279.14 288l14.22-92.66h-88.91V132.29c0-25.35 
    12.42-50.06 52.24-50.06H293V6.26S259.5 0 225.36 
    0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.2V288z"/>
</svg></span></div></a>

  <a href="https://www.instagram.com/tecnmjiquilpan/"><div class="box box2"> <span class="icon"><svg viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg" class="svg">
        <path d="M 9.9980469 3 C 6.1390469 3 3 6.1419531 3 10.001953 L 3 20.001953 C 3 23.860953 6.1419531 27 10.001953 27 L 20.001953 27 C 23.860953 27 27 23.858047 27 19.998047 L 27 9.9980469 C 27 6.1390469 23.858047 3 19.998047 3 L 9.9980469 3 z M 22 7 C 22.552 7 23 7.448 23 8 C 23 8.552 22.552 9 22 9 C 21.448 9 21 8.552 21 8 C 21 7.448 21.448 7 22 7 z M 15 9 C 18.309 9 21 11.691 21 15 C 21 18.309 18.309 21 15 21 C 11.691 21 9 18.309 9 15 C 9 11.691 11.691 9 15 9 z M 15 11 A 4 4 0 0 0 11 15 A 4 4 0 0 0 15 19 A 4 4 0 0 0 19 15 A 4 4 0 0 0 15 11 z"></path>
      </svg>
</span></div></a>

  <a href="https://www.youtube.com/channel/UC9kxJwry9WvAAq6fwaoFOjg"><div class="box box3"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="svg">
  <path d="M549.7 124.1c-6.3-23.7-24.9-42.3-48.6-48.6C458.5    64 288 64 288 64S117.5 64 74.9 75.5c-23.7 6.3-42.3    24.9-48.6 48.6C15.9 166.6 16 256 16 256s-.1 89.4   10.3 131.9c6.3 23.7 24.9 42.3 48.6 48.6C117.5 448    288 448 288 448s170.5 0 213.1-11.5c23.7-6.3    42.3-24.9 48.6-48.6C560.1 345.4 560 256 560    256s.1-89.4-10.3-131.9zM232 334V178l142   78-142 78z"/>
</svg></span></div></a>

  <div class="box box4"></div>
</div>
        
        
        
        
        
        <!-- =================================================== -->
                                    <!-- FECHA  -->
        <div class="FECHA">
                <h1 class="h1ITJ">
                    INSTITUTO TECNOLÓGICO DE JIQUILPAN 
                    <span id="fecha" class="fecha">DEL 19 - 27 Mayo</span>
                </h1>
        </div>
        
      
    </header>
    <!-- =================================================== -->
                            <!-- CALENDARIO  -->
    <!-- ================================================ -->
<section>
    <h1>CALENDARIO DE PARTIDOS</h1>
    <div class="calendar">

    </div>
</section>



    <!--======== FOOTER ========= -->
       <div class="footer">
        <div class="escudo">
            <img src="./assets/images/Tec.webp" alt="Tec" class="tec">

            <a href="https://www.facebook.com/ITJiquilpanMich" class="socialLink">
                <img src="./assets/images/Facebook.webp" alt="Facebook" class="facebook">
                <span class="socialText">FACEBOOK</span>
            </a>
            
            <a href="https://www.youtube.com/channel/UC9kxJwry9WvAAq6fwaoFOjg" class="socialLink">
                <img src="./assets/images/Youtube.webp" alt="Youtube" class="youtube">
                <span class="socialText">YOUTUBE</span>
            </a>

            <a href="https://twitter.com/TecNMJiquilpan" class="socialLink">
                <img src="./assets/images/Twitter.webp" alt="Twitter" class="twitter">
                <span class="socialText">TWITTER</span>
            </a>

            <a href="https://www.instagram.com/tecnmjiquilpan/" class="socialLink">
                <img src="./assets/images/Instagram.webp" alt="Instagram" class="insta">
                <span class="socialText">INSTAGRAM</span>
            </a>
        </div>

        <div class="emergency">
            <p class="emergPhone">TELÉFONOS DE EMERGENCIA</p>

            <div class="emerPhones">                                
                <div class="phones">
                  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="M240-400q0 52 21 98.5t60 81.5q-1-5-1-9v-9q0-32 12-60t35-51l113-111 113 111q23 23 35 51t12 60v9q0 4-1 9 39-35 60-81.5t21-98.5q0-50-18.5-94.5T648-574q-20 13-42 19.5t-45 6.5q-62 0-107.5-41T401-690q-39 33-69 68.5t-50.5 72Q261-513 250.5-475T240-400Zm240 52-57 56q-11 11-17 25t-6 29q0 32 23.5 55t56.5 23q33 0 56.5-23t23.5-55q0-16-6-29.5T537-292l-57-56Zm0-492v132q0 34 23.5 57t57.5 23q18 0 33.5-7.5T622-658l18-22q74 42 117 117t43 163q0 134-93 227T480-80q-134 0-227-93t-93-227q0-129 86.5-245T480-840Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">BOMBEROS Y PROTECCIÓN CIVIL</p>
                        <a href="tel:3535334108" class="phoneNumber">353 533 4108</a>
                        <hr>
                        <p class="phonePeople">SHY</p>
                        <a href="tel:3535334108" class="phoneNumber">353 532 0700</a>
                    </div>                    
                </div>

                <div class="phones">
                  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="m368-336 112-84 110 84-42-136 112-88H524l-44-136-44 136H300l110 88-42 136ZM480-80q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">POLICÍA MUNICIPAL</p>
                        <a href="tel:3535330824" class="phoneNumber">353 533 0824</a>
                    </div>
                </div>

                <div class="phones">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="m368-336 112-84 110 84-42-136 112-88H524l-44-136-44 136H300l110 88-42 136ZM480-80q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">POLICÍA FEDERAL</p>
                        <a href="tel:3535333434" class="phoneNumber">353 533 3434</a>
                         <a href="tel:3535333434" class="phoneNumber">911</a>
                    </div>      
                                  
                </div>
            </div>
        </div>

        <div class="tecnm">
            <p class="emergPhone">TECNM</p>

            <div class="emerPhones">
                <div class="phones">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">DIRECCIÓN</p>
                        <p class="phoneNumber">Av. Universidad 1200, Col. Xoco, Alcaldía Benito Juárez, Ciudad de México, C.P. 03330</p>
                    </div>                    
                </div>

                <div class="phones">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="M798-120q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12ZM241-600l66-66-17-94h-89q5 41 14 81t26 79Zm358 358q39 17 79.5 27t81.5 13v-88l-94-19-67 67ZM241-600Zm358 358Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">TELÉFONO</p>
                        <a href="tel:5536002500" class="phoneNumber">Conmutador: (55) 3600 2500</a>
                    </div>                    
                </div>

                <div class="phones">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-280L160-640v400h640v-400L480-440Zm0-80 320-200H160l320 200ZM160-640v-80 480-400Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">CORREO</p>
                        <a href="mailto:contacto@tecnm.mx" class="phoneNumber">contacto@tecnm.mx</a>
                    </div>                    
                </div>
            </div>
        </div>

        <div class="itj">
            <p class="emergPhone">ITJ</p>

            <div class="emerPhones">
                <div class="phones">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">DIRECCIÓN</p>
                        <p class="phoneNumber">Avenida Carretera Nacional S/N, Km. 202, Colonia La Loma, C.P. 59510 Jiquilpan de Juárez, Michoacán, México</p>
                    </div>                    
                </div>

                <div class="phones">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="M798-120q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12ZM241-600l66-66-17-94h-89q5 41 14 81t26 79Zm358 358q39 17 79.5 27t81.5 13v-88l-94-19-67 67ZM241-600Zm358 358Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">TELÉFONO</p>
                        <a href="tel:3535331126" class="phoneNumber">(353) 533 1126</a>
                    </div>                    
                </div>

                <div class="phones">
                   <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#A7C4E5"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-280L160-640v400h640v-400L480-440Zm0-80 320-200H160l320 200ZM160-640v-80 480-400Z"/></svg>

                    <div class="phoneText">
                        <p class="phonePeople">CORREO</p>
                        <a href="mailto:difusionitj@gmail.com" class="phoneNumber">difusionitj@gmail.com</a>
                    </div>                    
                </div>
            </div>
        </div>
     </div>

    <!-- ====== Iconos ====== -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- ====== Funcionalidad ====== -->
    <script type="module" src="./assets/js/home.js"></script>

    <script>
document.addEventListener("DOMContentLoaded", async () => {
  const calendarDiv = document.querySelector(".calendar");

  // Agrega botones de ordenación con margen superior
  const buttonsDiv = document.createElement("div");
  buttonsDiv.className = "sort-buttons";
  buttonsDiv.innerHTML = `
    <button id="sortAscending" class="sort-btn">Ordenar por Fecha ↑</button>
    <button id="sortDescending" class="sort-btn">Ordenar por Fecha ↓</button>
  `;
  buttonsDiv.style.marginTop = "30px"; // <<< Margen para separarlos del contenido superior
  buttonsDiv.style.marginBottom = "15px";

  // Estilo para botones y tabla
  const style = document.createElement("style");
  style.textContent = `
    .sort-btn {
      background-color: #4CAF50;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
    }
    .sort-btn:hover {
      background-color: #45a049;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    th {
      cursor: pointer;
    }
    th:hover {
      background-color: #ddd;
    }
  `;
  document.head.appendChild(style);
  calendarDiv.appendChild(buttonsDiv);

  let gamesData = [];
  let equiposMap = {};
  let disciplinasMap = {};

  try {
    const [rolRes, equiposRes, disciplinasRes] = await Promise.all([
      fetch("https://back-prenacional-production.up.railway.app/api/rolDeJuegos"),
      fetch("https://back-prenacional-production.up.railway.app/api/equipo"),
      fetch("https://back-prenacional-production.up.railway.app/api/disciplinas"),
    ]);

    gamesData = await rolRes.json();
    const equipos = await equiposRes.json();
    const disciplinas = await disciplinasRes.json();

    equiposMap = Object.fromEntries(equipos.map(e => [e.id_equipo, e.nombre]));
    disciplinasMap = Object.fromEntries(
      disciplinas.map(d => [
        d.id_diciplinas,
        `${d.nombre} ${d.categoria}`
      ])
    );

    renderCalendar(gamesData, equiposMap, disciplinasMap);

    document.getElementById("sortAscending").addEventListener("click", () => {
      const sortedGames = sortGamesByDate(gamesData, 'asc');
      renderCalendar(sortedGames, equiposMap, disciplinasMap);
    });

    document.getElementById("sortDescending").addEventListener("click", () => {
      const sortedGames = sortGamesByDate(gamesData, 'desc');
      renderCalendar(sortedGames, equiposMap, disciplinasMap);
    });

  } catch (error) {
    console.error("Error al cargar datos:", error);
    calendarDiv.innerHTML = "<p>Tenemos muchas peticiones, estamos trabajando en eso, gracias por usar la pagina :).</p>";
  }

  function convertToDate(dateStr) {
    if (!dateStr) return new Date(0);
    const parts = dateStr.split('/');
    if (parts.length === 3) {
      return new Date(parts[2], parts[1] - 1, parts[0]);
    } else {
      return new Date(dateStr);
    }
  }

  function sortGamesByDate(games, order = 'asc') {
    return [...games].sort((a, b) => {
      const dateA = convertToDate(a.fecha);
      const dateB = convertToDate(b.fecha);

      if (dateA.getTime() === dateB.getTime()) {
        const timeA = a.hora ? a.hora.split(':') : ['00', '00'];
        const timeB = b.hora ? b.hora.split(':') : ['00', '00'];

        const hourA = parseInt(timeA[0]);
        const hourB = parseInt(timeB[0]);

        if (hourA !== hourB) {
          return order === 'asc' ? hourA - hourB : hourB - hourA;
        }

        const minuteA = parseInt(timeA[1]);
        const minuteB = parseInt(timeB[1]);

        return order === 'asc' ? minuteA - minuteB : minuteB - minuteA;
      }

      return order === 'asc' ? dateA - dateB : dateB - dateA;
    });
  }

  function renderCalendar(games, equiposMap, disciplinasMap) {
  calendarDiv.querySelectorAll("table").forEach(table => table.remove());

  if (!Array.isArray(games)) {
    calendarDiv.innerHTML += "<p>Tenemos muchas peticiones, estamos trabajando en eso, gracias por usar la pagina :).</p>";
    return;
  }

  if (games.length === 0) {
    calendarDiv.innerHTML += "<p>Tenemos muchas peticiones, estamos trabajando en eso, gracias por usar la pagina :).</p>";
    return;
  }

  // Mapa manual por id_RolDeJuegos
  const canchaMap = {
    1: "Cancha Principal",
    2: "Campo Tec",
    3: "Campo Tec",
    4: "Campo Tec",
    5: "Campo 1 U. Dep",
    6: "Campo 2 U. Dep",
    7: "Campo 1 U. Dep",
    8: "Campo 1 U. Dep",
    9: "Campo 1 U. Dep",
    10: "Campo 2 U. Dep",
    11: "Campo 1 U. Dep",
    12: "Campo 2 U. Dep",
    13: "Campo 1 U. Dep",
    14: "Audi Tec",
    15: "Audi Tec",
    16: "Audi Tec",
    17: "ddddddddddddddd",
    18: "Audi Tec",
    19: "Audi Tec",
    20: "Audi Tec",
    21: "Audi Tec",
    22: "Audi Tec",
    23: "Audi Tec",
    24: "Audi Tec",
    // Agrega todos los ids necesarios
  };

  const table = document.createElement("table");
  table.innerHTML = `
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Hora</th>
        <th>Disciplina</th>
        <th>Equipo Local</th>
        <th>Equipo Visitante</th>
        <th>Cancha</th>
      </tr>
    </thead>
    <tbody>
      ${games.map(game => {
        const local = equiposMap[game.equipoLocalid] || "Desconocido";
        const visitante = equiposMap[game.equipoVisitid] || "Desconocido";
        const cancha = canchaMap[game.id_RolDeJuegos] || "Por asignar";

        return `
          <tr>
            <td>${game.fecha}</td>
            <td>${game.hora}</td>
            <td>${disciplinasMap[game.disciplinaid] || "Desconocida"}</td>
            <td>${local}</td>
            <td>${visitante}</td>
            <td>${cancha}</td>
          </tr>
        `;
      }).join("")}
    </tbody>
  `;

  calendarDiv.appendChild(table);
}




});
</script>



</body>